<html><head>
  <title>Acceleration visualisations</title>
  <link rel="icon" href="/static/img/vialogo_favicon16px.ico" size="16x16">
  <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
  <style>
  /* Basic Styling with CSS */
  body {
    background-color: black;
    color: white;
    font-family: Arial, Helvetica, sans-serif;
  }  
  
  .line {
      fill: none;
      stroke: #ffab00;
      stroke-width: 3;
  }
  
  </style>
  </head>
  <body>
  <h1>Acceleration</h1>
  <div id="demo1"><svg id="my_chart1" width="400" height="150"><g transform="translate(0,1)"><line x1="0" y1="0" x2="1920" y2="0" style="stroke: red; stroke-width: 1;"></line><line x1="0" y1="55.5" x2="1920" y2="55.5" style="stroke: red; stroke-width: 1;"></line><line x1="0" y1="74" x2="1920" y2="74" style="stroke: white; stroke-width: 2;"></line><line x1="0" y1="92.5" x2="1920" y2="92.5" style="stroke: red; stroke-width: 1;"></line><line x1="0" y1="148" x2="1920" y2="148" style="stroke: red; stroke-width: 1;"></line><path id="my_path1" class="line" d="M0,72.73583333333333C0.6666666666666666,72.81805555555555,1.3333333333333335,72.90027777777776,2,72.9455C2.6666666666666665,72.99072222222223,3.3333333333333335,73.01333333333335,4,73.01333333333335C4.666666666666667,73.01333333333335,5.333333333333333,72.88075,6,72.84066666666666C6.666666666666667,72.80058333333332,7.333333333333333,72.7964722222222,8,72.77283333333332C8.666666666666666,72.74919444444444,9.333333333333334,72.69883333333334,10,72.69883333333334C10.666666666666666,72.69883333333334,11.333333333333334,72.80366666666667,12,72.80366666666667C12.666666666666668,72.80366666666667,13.333333333333334,72.75227777777776,14.000000000000002,72.74816666666666C14.666666666666668,72.74405555555556,15.333333333333334,72.742,16,72.742C16.666666666666668,72.742,17.333333333333332,72.86019444444445,18,72.9085C18.666666666666668,72.95680555555556,19.333333333333332,73.03183333333334,20,73.03183333333334C20.666666666666668,73.03183333333334,21.333333333333332,72.67416666666665,22,72.67416666666665C22.666666666666668,72.67416666666665,23.333333333333332,73.08116666666666,24,73.08116666666666C24.666666666666668,73.08116666666666,25.333333333333332,72.83861111111109,26,72.82216666666666C26.666666666666668,72.80572222222223,27.333333333333336,72.81394444444445,28.000000000000004,72.79750000000001C28.666666666666668,72.78105555555558,29.333333333333336,72.53233333333333,30,72.53233333333333C30.666666666666668,72.53233333333333,31.333333333333332,72.54672222222221,32,72.5755C32.666666666666664,72.6042777777778,33.333333333333336,72.83038888888888,34,72.83449999999999C34.666666666666664,72.8386111111111,35.333333333333336,72.84066666666666,36,72.84066666666666C36.666666666666664,72.84066666666666,37.333333333333336,72.80983333333333,38,72.74816666666666C38.666666666666664,72.6865,39.333333333333336,72.47066666666667,40,72.47066666666667C40.666666666666664,72.47066666666667,41.333333333333336,72.47066666666667,42,72.47066666666667C42.666666666666664,72.47066666666667,43.333333333333336,72.49327777777778,44,72.5385C44.666666666666664,72.58372222222222,45.333333333333336,72.86533333333334,46,72.86533333333334C46.666666666666664,72.86533333333334,47.333333333333336,72.75433333333334,48,72.75433333333334C48.666666666666664,72.75433333333334,49.333333333333336,72.99483333333332,50,72.99483333333332C50.666666666666664,72.99483333333332,51.333333333333336,72.81599999999999,52,72.779C52.666666666666664,72.742,53.333333333333336,72.74405555555556,54,72.7235C54.66666666666667,72.70294444444444,55.333333333333336,72.65566666666666,56.00000000000001,72.65566666666666C56.66666666666667,72.65566666666666,57.33333333333333,72.71527777777779,57.99999999999999,72.75433333333334C58.666666666666664,72.79338888888888,59.33333333333333,72.88999999999999,60,72.88999999999999C60.666666666666664,72.88999999999999,61.333333333333336,72.82216666666666,62,72.82216666666666C62.666666666666664,72.82216666666666,63.333333333333336,72.95166666666667,64,72.95166666666667C64.66666666666667,72.95166666666667,65.33333333333333,72.93522222222222,66,72.90233333333335C66.66666666666667,72.86944444444447,67.33333333333333,72.5755,68,72.5755C68.66666666666667,72.5755,69.33333333333333,72.65155555555555,70,72.67416666666665C70.66666666666667,72.69677777777775,71.33333333333333,72.6865,72,72.71116666666667C72.66666666666667,72.73583333333335,73.33333333333333,72.7748888888889,74,72.84683333333334C74.66666666666667,72.91877777777778,75.33333333333333,73.14283333333334,76,73.14283333333334C76.66666666666667,73.14283333333334,77.33333333333333,72.70294444444446,78,72.63716666666667C78.66666666666667,72.57138888888889,79.33333333333333,72.5385,80,72.5385C80.66666666666667,72.5385,81.33333333333333,72.59400000000001,82,72.59400000000001C82.66666666666667,72.59400000000001,83.33333333333333,72.56316666666667,84,72.56316666666667C84.66666666666667,72.56316666666667,85.33333333333333,72.73583333333333,86,72.73583333333333C86.66666666666667,72.73583333333333,87.33333333333333,72.64127777777779,88,72.63716666666667C88.66666666666667,72.63305555555556,89.33333333333333,72.631,90,72.631C90.66666666666667,72.631,91.33333333333333,72.77283333333332,92,72.77283333333332C92.66666666666667,72.77283333333332,93.33333333333333,72.74816666666666,94,72.74816666666666C94.66666666666667,72.74816666666666,95.33333333333333,72.80058333333334,96,72.816C96.66666666666667,72.83141666666667,97.33333333333333,72.84066666666666,98,72.84066666666666C98.66666666666667,72.84066666666666,99.33333333333333,72.55083333333334,100,72.55083333333334C100.66666666666667,72.55083333333334,101.33333333333333,72.80366666666667,102,72.80366666666667C102.66666666666667,72.80366666666667,103.33333333333333,72.71733333333333,104,72.71733333333333C104.66666666666667,72.71733333333333,105.33333333333333,72.99483333333332,106,72.99483333333332C106.66666666666667,72.99483333333332,107.33333333333333,72.61866666666666,108,72.61866666666666C108.66666666666667,72.61866666666666,109.33333333333334,72.68650000000001,110.00000000000001,72.68650000000001C110.66666666666669,72.68650000000001,111.33333333333334,72.6083888888889,112.00000000000001,72.45216666666667C112.66666666666667,72.29594444444444,113.33333333333333,71.67619444444445,113.99999999999999,70.84266666666667C114.66666666666666,70.0091388888889,115.33333333333331,68.64013888888888,115.99999999999999,67.451C116.66666666666666,66.2618611111111,117.33333333333333,65.02236111111112,118,63.70783333333334C118.66666666666667,62.39330555555557,119.33333333333333,60.96058333333333,120,59.563833333333335C120.66666666666667,58.16708333333334,121.33333333333333,56.30269444444445,122,55.327333333333335C122.66666666666667,54.35197222222222,123.33333333333333,54.432138888888886,124,53.711666666666666C124.66666666666667,52.991194444444446,125.33333333333333,51.73730555555555,126,51.00449999999999C126.66666666666667,50.271694444444435,127.33333333333333,49.94383333333333,128,49.31483333333333C128.66666666666666,48.685833333333335,129.33333333333334,47.933499999999995,130,47.2305C130.66666666666666,46.5275,131.33333333333334,45.85019444444445,132,45.096833333333336C132.66666666666666,44.343472222222225,133.33333333333334,43.44108333333333,134,42.71033333333333C134.66666666666666,41.97958333333333,135.33333333333334,41.545861111111094,136,40.71233333333332C136.66666666666666,39.878805555555545,137.33333333333334,38.70611111111112,138,37.709166666666675C138.66666666666666,36.71222222222223,139.33333333333334,35.479916666666654,140,34.73066666666665C140.66666666666666,33.98141666666665,141.33333333333334,33.60011111111112,142,33.213666666666676C142.66666666666666,32.82722222222223,143.33333333333334,32.412,144,32.412C144.66666666666666,32.412,145.33333333333334,33.07286111111112,146,33.435666666666684C146.66666666666666,33.798472222222244,147.33333333333334,34.062611111111124,148,34.58883333333334C148.66666666666666,35.11505555555556,149.33333333333334,35.95063888888889,150,36.592999999999996C150.66666666666666,37.235361111111104,151.33333333333334,37.93219444444445,152,38.443000000000005C152.66666666666666,38.95380555555556,153.33333333333334,39.167583333333326,154,39.65783333333333C154.66666666666666,40.14808333333333,155.33333333333334,40.77194444444444,156,41.3845C156.66666666666666,41.99705555555556,157.33333333333334,42.795638888888895,158,43.33316666666667C158.66666666666666,43.870694444444446,159.33333333333334,44.18622222222223,160,44.60966666666667C160.66666666666666,45.03311111111111,161.33333333333334,45.569611111111115,162,45.87383333333334C162.66666666666666,46.17805555555556,163.33333333333334,46.14516666666667,164,46.434999999999995C164.66666666666666,46.72483333333332,165.33333333333334,47.124638888888875,166,47.61283333333332C166.66666666666666,48.101027777777766,167.33333333333334,49.03938888888889,168,49.36416666666666C168.66666666666666,49.68894444444444,169.33333333333334,49.85133333333333,170,49.85133333333333C170.66666666666666,49.85133333333333,171.33333333333334,49.583083333333335,172,49.48133333333334C172.66666666666666,49.37958333333334,173.33333333333334,49.32305555555557,174,49.24083333333334C174.66666666666666,49.158611111111114,175.33333333333334,49.156555555555556,176,48.98799999999999C176.66666666666666,48.81944444444443,177.33333333333334,48.248000000000005,178,47.86566666666667C178.66666666666666,47.483333333333334,179.33333333333334,47.11333333333334,180,46.694C180.66666666666666,46.27466666666667,181.33333333333334,45.70425,182,45.349666666666664C182.66666666666666,44.995083333333326,183.33333333333334,44.92519444444444,184,44.5665C184.66666666666666,44.20780555555555,185.33333333333334,43.67438888888887,186,43.197499999999984C186.66666666666666,42.7206111111111,187.33333333333334,42.05049999999999,188,41.70516666666666C188.66666666666666,41.359833333333334,189.33333333333334,41.43075000000002,190,41.12550000000002C190.66666666666666,40.820250000000016,191.33333333333334,39.873666666666665,192,39.873666666666665C192.66666666666666,39.873666666666665,193.33333333333334,40.194333333333326,194,40.194333333333326C194.66666666666666,40.194333333333326,195.33333333333334,40.10799999999999,196,39.935333333333325C196.66666666666666,39.76266666666666,197.33333333333334,38.375166666666665,198,38.30116666666666C198.66666666666666,38.227166666666655,199.33333333333334,38.190166666666656,200,38.190166666666656C200.66666666666666,38.190166666666656,201.33333333333334,38.32377777777779,202,38.49233333333335C202.66666666666666,38.660888888888906,203.33333333333334,38.92091666666666,204,39.201499999999996C204.66666666666666,39.48208333333333,205.33333333333334,40.17583333333334,206,40.17583333333334C206.66666666666666,40.17583333333334,207.33333333333334,40.14705555555555,208,40.089499999999994C208.66666666666666,40.031944444444434,209.33333333333334,39.6825,210,39.485166666666665C210.66666666666666,39.28783333333333,211.33333333333334,38.905499999999996,212,38.905499999999996C212.66666666666666,38.905499999999996,213.33333333333334,41.27966666666667,214,41.27966666666667C214.66666666666666,41.27966666666667,215.33333333333334,40.98366666666667,216,40.98366666666667C216.66666666666669,40.98366666666667,217.33333333333334,41.40299999999999,218.00000000000003,41.550999999999995C218.66666666666669,41.69899999999999,219.33333333333337,41.71852777777778,220.00000000000003,41.87166666666667C220.66666666666669,42.02480555555556,221.33333333333337,42.15738888888889,222.00000000000003,42.469833333333334C222.66666666666669,42.78227777777778,223.33333333333337,43.74633333333333,224.00000000000003,43.74633333333333C224.66666666666669,43.74633333333333,225.33333333333331,42.19850000000001,225.99999999999997,42.19850000000001C226.66666666666663,42.19850000000001,227.33333333333331,42.45030555555557,227.99999999999997,42.63016666666668C228.66666666666663,42.81002777777779,229.33333333333331,43.27766666666667,229.99999999999997,43.27766666666667C230.66666666666663,43.27766666666667,231.33333333333331,41.809999999999995,231.99999999999997,41.809999999999995C232.66666666666666,41.809999999999995,233.33333333333331,45.1215,234,45.1215C234.66666666666666,45.1215,235.33333333333334,45.076277777777776,236,44.98583333333333C236.66666666666666,44.89538888888889,237.33333333333334,44.336277777777774,238,44.25816666666667C238.66666666666666,44.18005555555556,239.33333333333334,44.141000000000005,240,44.141000000000005C240.66666666666666,44.141000000000005,241.33333333333334,44.404111111111106,242,44.48633333333333C242.66666666666666,44.56855555555555,243.33333333333334,44.63433333333333,244,44.63433333333333C244.66666666666666,44.63433333333333,245.33333333333334,43.770999999999994,246,43.770999999999994C246.66666666666666,43.770999999999994,247.33333333333334,44.65694444444445,248,45.2325C248.66666666666666,45.808055555555555,249.33333333333334,46.693999999999996,250,47.22433333333333C250.66666666666666,47.75466666666666,251.33333333333334,48.4145,252,48.4145C252.66666666666666,48.4145,253.33333333333334,45.756666666666675,254,45.756666666666675C254.66666666666666,45.756666666666675,255.33333333333334,45.88822222222222,256,46.046499999999995C256.6666666666667,46.20477777777777,257.3333333333333,46.351749999999996,258,46.70633333333333C258.6666666666667,47.06091666666667,259.3333333333333,48.174,260,48.174C260.6666666666667,48.174,261.3333333333333,47.730000000000004,262,47.730000000000004C262.6666666666667,47.730000000000004,263.3333333333333,49.332305555555564,264,50.048666666666676C264.6666666666667,50.76502777777779,265.3333333333333,51.826722222222216,266,52.028166666666664C266.6666666666667,52.22961111111111,267.3333333333333,52.12888888888889,268,52.330333333333336C268.6666666666667,52.53177777777778,269.3333333333333,55.09916666666667,270,55.09916666666667C270.6666666666667,55.09916666666667,271.3333333333333,54.9223888888889,272,54.568833333333345C272.6666666666667,54.21527777777779,273.3333333333333,51.355999999999995,274,51.355999999999995C274.6666666666667,51.355999999999995,275.3333333333333,55.74152777777779,276,57.20200000000001C276.6666666666667,58.662472222222235,277.3333333333333,60.11883333333334,278,60.11883333333334C278.6666666666667,60.11883333333334,279.3333333333333,57.004666666666665,280,57.004666666666665C280.6666666666667,57.004666666666665,281.3333333333333,57.660388888888875,282,58.41066666666666C282.6666666666667,59.16094444444444,283.3333333333333,61.506333333333345,284,61.506333333333345C284.6666666666667,61.506333333333345,285.3333333333333,59.66866666666667,286,59.66866666666667C286.6666666666667,59.66866666666667,287.3333333333333,61.67283333333334,288,61.67283333333334C288.6666666666667,61.67283333333334,289.3333333333333,61.629666666666665,290,61.629666666666665C290.6666666666667,61.629666666666665,291.3333333333333,62.00583333333333,292,62.00583333333333C292.6666666666667,62.00583333333333,293.3333333333333,61.50016666666667,294,61.50016666666667C294.6666666666667,61.50016666666667,295.3333333333333,61.54127777777777,296,61.586499999999994C296.6666666666667,61.631722222222216,297.3333333333333,61.64816666666667,298,61.77150000000001C298.6666666666667,61.89483333333335,299.3333333333333,63.162083333333335,300,63.57833333333333C300.6666666666667,63.99458333333333,301.3333333333333,64.24022222222223,302,64.269C302.6666666666667,64.29777777777778,303.3333333333333,64.2833888888889,304,64.31216666666667C304.6666666666667,64.34094444444445,305.3333333333333,64.60097222222223,306,64.83016666666667C306.6666666666667,65.05936111111112,307.3333333333333,65.57222222222221,308,65.68733333333333C308.6666666666667,65.80244444444445,309.3333333333333,65.7448888888889,310,65.86000000000001C310.6666666666667,65.97511111111113,311.3333333333333,66.44686111111112,312,66.85283333333334C312.6666666666667,67.25880555555555,313.3333333333333,68.29583333333333,314,68.29583333333333C314.6666666666667,68.29583333333333,315.3333333333333,67.79427777777778,316,67.4325C316.6666666666667,67.07072222222223,317.3333333333333,66.12516666666667,318,66.12516666666667C318.6666666666667,66.12516666666667,319.3333333333333,66.18066666666667,320,66.18066666666667C320.6666666666667,66.18066666666667,321.3333333333333,65.8055277777778,322,65.61333333333334C322.6666666666667,65.42113888888889,323.3333333333333,65.02749999999999,324,65.02749999999999C324.6666666666667,65.02749999999999,325.3333333333333,65.8045,326,65.8045C326.6666666666667,65.8045,327.3333333333333,64.99461111111111,328,64.565C328.6666666666667,64.13538888888888,329.3333333333333,63.536194444444455,330,63.226833333333346C330.6666666666667,62.91747222222224,331.3333333333333,62.70883333333334,332,62.70883333333334C332.6666666666667,62.70883333333334,333.3333333333333,63.67700000000001,334,63.67700000000001C334.6666666666667,63.67700000000001,335.3333333333333,63.130222222222216,336,62.85066666666666C336.6666666666667,62.57111111111111,337.3333333333333,61.99966666666668,338,61.99966666666668C338.6666666666667,61.99966666666668,339.3333333333333,63.87433333333335,340,63.87433333333335C340.6666666666667,63.87433333333335,341.3333333333333,63.23916666666668,342,63.23916666666668C342.6666666666667,63.23916666666668,343.3333333333333,63.448833333333326,344,63.67083333333333C344.6666666666667,63.89283333333333,345.3333333333333,64.57116666666668,346,64.57116666666668C346.6666666666667,64.57116666666668,347.3333333333333,64.55883333333333,348,64.55883333333333C348.6666666666667,64.55883333333333,349.3333333333333,65.897,350,66.29166666666667C350.6666666666667,66.68633333333334,351.3333333333333,66.92683333333333,352,66.92683333333333C352.6666666666667,66.92683333333333,353.3333333333333,66.73566666666666,354,66.73566666666666C354.6666666666667,66.73566666666666,355.3333333333333,66.785,356,66.88366666666668C356.6666666666667,66.98233333333337,357.3333333333333,67.98544444444444,358,68.30816666666666C358.6666666666667,68.63088888888889,359.3333333333333,68.71311111111112,360,68.82000000000001C360.6666666666667,68.9268888888889,361.3333333333333,68.92072222222224,362,68.98033333333335C362.6666666666667,69.03994444444446,363.3333333333333,69.14888888888886,364,69.17766666666665C364.6666666666667,69.20644444444444,365.3333333333333,69.19205555555554,366,69.22083333333333C366.6666666666667,69.24961111111112,367.3333333333333,69.64119444444447,368,69.78816666666668C368.6666666666667,69.9351388888889,369.3333333333333,70.10266666666666,370,70.10266666666666C370.6666666666667,70.10266666666666,371.3333333333333,69.86216666666667,372,69.86216666666667C372.6666666666667,69.86216666666667,373.3333333333333,69.9443888888889,374,70.10883333333334C374.6666666666667,70.27327777777778,375.3333333333333,72.98455555555553,376,73.21066666666665C376.6666666666667,73.43677777777778,377.3333333333333,73.54983333333334,378,73.54983333333334C378.6666666666667,73.54983333333334,379.3333333333333,73.2045,380,73.2045C380.6666666666667,73.2045,381.3333333333333,73.83966666666667,382,73.83966666666667C382.6666666666667,73.83966666666667,383.3333333333333,73.3155,384,73.16133333333333C384.6666666666667,73.00716666666666,385.3333333333333,72.91466666666668,386,72.91466666666668C386.6666666666667,72.91466666666668,387.3333333333333,73.46966666666665,388,73.46966666666665C388.6666666666667,73.46966666666665,389.3333333333333,72.9455,390,72.9455C390.6666666666667,72.9455,391.3333333333333,73.42649999999999,392,73.42649999999999C392.6666666666667,73.42649999999999,393.3333333333333,73.41725,394,73.408C394.6666666666667,73.39875,395.3333333333333,73.37099999999998,396,73.37099999999998C396.6666666666667,73.37099999999998,397.3333333333333,74.09866666666667,398,74.09866666666667C398.6666666666667,74.09866666666667,399.3333333333333,73.58066666666667,400,73.06266666666667"></path></g></svg></div>
  <h1>Fading tail</h1>
  <div id="demo2"><svg id="my_chart2" width="150" height="150"><g transform="translate(1,1)"><defs><filter id="fuzzyFilter" width="300%" x="-100%" color-interpolation-filters="sRGB"><feGaussianBlur class="blurValues" in="SourceGraphic" stdDeviation="4 0"></feGaussianBlur></filter></defs><rect x1="0" y1="0" width="148" height="148" style="stroke: white; stroke-width: 1;"></rect><line x1="0" y1="74" x2="148" y2="74" style="stroke: white; stroke-width: 1;"></line><line x1="74" y1="0" x2="74" y2="148" style="stroke: white; stroke-width: 1;"></line><g id="my_path2"><circle id="my_path2" cx="82.08347222222223" cy="72.09175925925926" style="r: 5; fill: rgb(0, 0, 0); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.67958333333333" cy="71.84851851851852" style="r: 5.33333; fill: rgb(9, 9, 9); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.50486111111111" cy="71.74231481481482" style="r: 5.66667; fill: rgb(17, 17, 17); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.06805555555555" cy="71.76972222222221" style="r: 6; fill: rgb(26, 26, 26); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.64361111111111" cy="71.85537037037037" style="r: 6.33333; fill: rgb(34, 34, 34); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.6538888888889" cy="72.05064814814814" style="r: 6.66667; fill: rgb(43, 43, 43); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="83.10097222222221" cy="72.03694444444444" style="r: 7; fill: rgb(51, 51, 51); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.33527777777778" cy="71.74231481481482" style="r: 7.33333; fill: rgb(60, 60, 60); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.49972222222222" cy="71.86907407407406" style="r: 7.66667; fill: rgb(68, 68, 68); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.87486111111112" cy="71.88962962962962" style="r: 8; fill: rgb(77, 77, 77); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.48430555555555" cy="71.96842592592593" style="r: 8.33333; fill: rgb(85, 85, 85); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.10402777777777" cy="72.1637037037037" style="r: 8.66667; fill: rgb(94, 94, 94); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.51513888888888" cy="71.9512962962963" style="r: 9; fill: rgb(102, 102, 102); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="81.96013888888888" cy="71.94101851851852" style="r: 9.33333; fill: rgb(111, 111, 111); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.77208333333334" cy="72.11916666666667" style="r: 9.66667; fill: rgb(119, 119, 119); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.40208333333334" cy="72.16712962962963" style="r: 10; fill: rgb(128, 128, 128); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.27361111111111" cy="71.74574074074074" style="r: 10.3333; fill: rgb(136, 136, 136); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.10402777777777" cy="71.81083333333333" style="r: 10.6667; fill: rgb(145, 145, 145); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.37124999999999" cy="71.70805555555556" style="r: 11; fill: rgb(153, 153, 153); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.29930555555555" cy="72.0712037037037" style="r: 11.3333; fill: rgb(162, 162, 162); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.28902777777778" cy="71.85194444444446" style="r: 11.6667; fill: rgb(170, 170, 170); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.695" cy="72.14657407407408" style="r: 12; fill: rgb(179, 179, 179); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.31472222222223" cy="71.86222222222221" style="r: 12.3333; fill: rgb(187, 187, 187); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.10402777777777" cy="72.16712962962963" style="r: 12.6667; fill: rgb(196, 196, 196); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.2325" cy="71.64981481481482" style="r: 13; fill: rgb(204, 204, 204); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="81.80083333333334" cy="71.74231481481482" style="r: 13.3333; fill: rgb(213, 213, 213); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="81.79569444444445" cy="71.86222222222223" style="r: 13.6667; fill: rgb(221, 221, 221); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.00125" cy="71.89305555555555" style="r: 14; fill: rgb(230, 230, 230); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.43291666666667" cy="72.06435185185185" style="r: 14.3333; fill: rgb(238, 238, 238); stroke-width: 0; stroke: none;"></circle><circle id="my_path2" cx="82.29416666666667" cy="71.64296296296297" style="r: 14.6667; fill: rgb(247, 247, 247); stroke-width: 3; stroke: yellow;"></circle></g></g></svg></div>
  <div id="demo2_errors"></div>
  
  
  <script>
    
  //GLOBAL VARIABLES	
  var demo1_display_n, demo2_display_n, data_lon, data_all, svg1, svg2, yScale, xScale, line,time_ms = 0, lon_sampled, combined_sampled;
  var demo1_sampling_period_ms, demo2_sampling_period_ms;
  
  // Get sample data
  url = "https://wwwdev.via.farm/static/accel_data1.json";
  
  
  fetch(url)
    .then(response => {
    if (response.ok) {
      response.json().then(data => {
      successCallback(data);
      });
    } else document.querySelector('#demo2_errors').textContent = 'Network response was not ok.';
    })
    .catch(error =>
    document.querySelector('#demo2_errors').textContent = 'Fetch error: ' + error
    );
  
  var successCallback = function(data) {
    var d = [];
    for (let row of data) {
      d.push({"y":row.lon});
    }	
    //console.log(data_y);
    data_all = data;
    //data_lon = d;
    
    //sampling_period_ms = 50;
    
    display_time_ms = 10000; 
    demo1_display_time_ms = 10000; 
    demo1_display_n = 200; 
    demo1_sampling_period_ms = demo1_display_time_ms / demo1_display_n;
    
    demo2_display_time_ms = 10000; 
    demo2_display_n = 60; 
    demo2_sampling_period_ms = demo2_display_time_ms / demo2_display_n;
      
    lon_sampled = sample_data_demo1();
    combined_sampled = sample_data_demo2();
    //console.log(combined_sampled);
    //console.log(sampled.length);
    draw_demo1();
    draw_demo2();
    redraw();
  }
  
  
  function sample_data_demo1() { 	//sample data with a rolling_avg
  
    var sampled = [];
    // Sample the data at 5 Hz taking an average of the values in the 0.2 second period.
    var time_loop = data_all[0].timestamp;
    sum_lon = 0;
    avg_counter = 0;
    for (let row of data_all) {
      sum_lon += row.lon;
      avg_counter += 1;
      if (row.timestamp > time_loop +	demo1_sampling_period_ms/1000) {
        avg_lon = sum_lon/avg_counter;
        sampled.push({"y":avg_lon});
        sum_lon = 0;
        avg_counter = 0;
        time_loop = row.timestamp;
      }		
    }
    //console.log(demo1_sampling_period_ms);
    //console.log(sampled.length);
    return sampled;
  }
  
  function sample_data_demo2() { 	//sample data with a rolling_avg
    var sampled = [];
    // Sample the data at 5 Hz taking an average of the values in the 0.2 second period.
    var time_loop = data_all[0].timestamp;
    sum_lon = 0;
    sum_lat = 0;
    avg_counter = 0;
    for (let row of data_all) {
      sum_lon += row.lon;
      sum_lat += row.lat;
      avg_counter += 1;
      if (row.timestamp > time_loop +	demo2_sampling_period_ms/1000) {
        avg_lon = sum_lon/avg_counter;
        avg_lat = sum_lat/avg_counter;
        sampled.push({"timestamp":time_loop,"lon":avg_lon,"lat":avg_lat});
        sum_lon = 0;
        sum_lat = 0;
        avg_counter = 0;
        time_loop = row.timestamp;
      }		
    }
    return sampled;
  }
  
  
  function redraw() {
    redraw1();
    redraw2();
     //if (time_ms < 6000)
    setTimeout(redraw, redraw_time_ms); //do it again in 0.05 seconds
  
  }
  
  
  function draw_demo1() {
    var innerWidth = 400;
    var innerHeight = 150;
    var margin = {top: 1, right: 0, bottom: 1, left: 0}
      , width = innerWidth - margin.left - margin.right
      , height = innerHeight - margin.top - margin.bottom;
      
    // An array of objects of length N. Each object has key -> value pair, the key being "y" and the value is a random number ranging from -5 to 5.
    //	var data_lon = d3.range(1000).map(function(d) { return {"y": d3.randomUniform(-5,5)() } })
    // The number of datapoints displayed on the chart
  
  
    // 5. X scale will use the index of our data
    xScale1 = d3.scaleLinear()
    .domain([0, demo1_display_n]) // input
    .range([0, width]); // output
  
    // 6. Y scale will use the randomly generate number 
    yScale1 = d3.scaleLinear()
    .domain([-5, 5]) // input 
    .range([height, 0]); // output 
  
    // 7. d3's line generator
    line_demo1 = d3.line()
    .x(function(d, i) { return xScale1(i); }) // set the x values for the line generator
    .y(function(d) { return yScale1(d.y); }) // set the y values for the line generator 
    .curve(d3.curveMonotoneX) // apply smoothing to the line
  
    // 1. Add the svg1 to the page and employ #2
    svg1 = d3.select("#demo1").append("svg")
    .attr("id","my_chart1")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  
    //Refernce lines
    draw_reference_line_demo1(5, "red", 1)
    draw_reference_line_demo1(1.25, "red", 1)
    draw_reference_line_demo1(0, "white", 2)
    draw_reference_line_demo1(-1.25, "red", 1) 
    draw_reference_line_demo1(-5, "red", 1)
    
    
  }
  
  
  function draw_reference_line_demo1(ref_value,ref_color, ref_stroke) {
    svg1.append('line')
      .style("stroke", ref_color)
      .style("stroke-width", ref_stroke)
      .attr("x1", 0)
      .attr("y1", yScale1(ref_value))
      .attr("x2", innerWidth)
      .attr("y2", yScale1(ref_value)); 
  }
      
  
  
  function redraw1() {
    redraw_time_ms = 50;	
    sample_length_ms = lon_sampled.length * demo1_sampling_period_ms;	
      if (time_ms > sample_length_ms)      
        time_ms = 0;    
      else      
        time_ms += redraw_time_ms;
    start_record = time_ms/demo1_sampling_period_ms;
    dataset = lon_sampled.slice(start_record,start_record+demo1_display_n+1);
    //clear the previous line draw on the chart
    svg1.select("#my_path1").remove();
  
    //Append the path, bind the data, and call the line generator 
    svg1.append("path")
      .attr("id","my_path1")
      .datum(dataset) // 10. Binds data to the line 
      .attr("class", "line") // Assign a class for styling 
      .attr("d", line_demo1); // 11. Calls the line generator 
  
  }
  
  function draw_demo2() {
    var innerWidth = 150;
    var innerHeight = 150;
    var margin = {top: 1, right: 1, bottom: 1, left: 1}
      , width = innerWidth - margin.left - margin.right
      , height = innerHeight - margin.top - margin.bottom;
    demo2_display_time_sec = 10; // ???
    demo2_display_n = 30; 
      
    // An array of objects of length N. Each object has key -> value pair, the key being "y" and the value is a random number ranging from -5 to 5.
    //	var data_lon = d3.range(1000).map(function(d) { return {"y": d3.randomUniform(-5,5)() } })
    // The number of datapoints displayed on the chart
  
  
    // 5. X scale will use the index of our data
    xScale2 = d3.scaleLinear()
    .domain([-2,2]) // input
    .range([0, width]); // output
  
    // 6. Y scale will use the randomly generate number 
    yScale2 = d3.scaleLinear()
    .domain([-3, 3]) // input 
    .range([height, 0]); // output 
  
    greyScale = d3.scaleLinear()
      .domain([0,demo2_display_n])
      .range(["#000000","#ffffff"]);
  
    tailScale = d3.scaleLinear()
      .domain([0,demo2_display_n])
      .range([5,15]);
  
  
  
    // 1. Add the SVG to the page and employ #2
    svg2 = d3.select("#demo2").append("svg")
    .attr("id","my_chart2")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  
  
    //SVG filter for the fuzzy effect
    //Code based on http://tympanus.net/codrops/2015/04/08/motion-blur-effect-svg/
    var defs = svg2.append("defs");
  
    //Create a filter per circle so we can adjust the fuzzyness per circle that is flying out
    defs.append("filter")
      .attr("id", "fuzzyFilter")
      .attr("width", "300%")	//increase the width of the filter region to remove blur "boundary"
      .attr("x", "-100%") //make sure the center of the "width" lies in the middle
      .attr("color-interpolation-filters","sRGB") //to fix safari: http://stackoverflow.com/questions/24295043/svg-gaussian-blur-in-safari-unexpectedly-lightens-image
      .append("feGaussianBlur")
      .attr("class", "blurValues")
      .attr("in","SourceGraphic")
      .attr("stdDeviation","4 0"); //start without a blur
      
    //Reference lines
    svg2.append('rect')
      .style("stroke", "white")
      .style("stroke-width", 1)
      .attr("x1", 0)
      .attr("y1", 0)
      .attr("width", width)
      .attr("height", height); 		
    svg2.append('line')
      .style("stroke", "white")
      .style("stroke-width", 1)
      .attr("x1", 0)
      .attr("y1", yScale2(0))
      .attr("x2", width)
      .attr("y2", yScale2(0)); 	
    svg2.append('line')
      .style("stroke", "white")
      .style("stroke-width", 1)
      .attr("x1", xScale2(0))
      .attr("y1", 0)
      .attr("x2", xScale2(0))
      .attr("y2", height); 	
  }
  
    
   
  function redraw2() {
    redraw_time_ms = 50;	
    sample_length_ms = combined_sampled.length * demo2_sampling_period_ms;	
      if (time_ms > sample_length_ms)      
        time_ms = 0;    
      else      
        time_ms += redraw_time_ms;
    start_record = time_ms/demo2_sampling_period_ms;
    dataset = [];
    dataset = combined_sampled.slice(start_record,start_record+demo2_display_n);
  
  
  
    svg2.select("#my_path2").remove();
    my_path2 = svg2.append("g")
      .attr("id","my_path2")
  
  
    var i = 0;
    for (var i = 0; i < dataset.length; i++) {
      if (i == dataset.length-1) {
        strokewidth=3; 
        stroke = "yellow";
        }
      else {
        strokewidth=0;
          stroke = "none";
      
        }
      my_path2.append("circle")
      .attr("id","my_path2")
      .attr("cx", xScale2(dataset[i].lat))
      .attr("cy", yScale2(dataset[i].lon))	 
      .style('r', tailScale(i))
      .style('fill', greyScale(i))
      .style("stroke-width", strokewidth)
      .style("stroke", stroke);
    }
  
  
  }
     
      
  
  </script>
  </body></html>